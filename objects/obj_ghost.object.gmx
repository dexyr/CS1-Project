<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_ghost_idle</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_char_enemy</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Parent Event

event_inherited();
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Variables

team = teams.ENEMY;
chase_dist = 400;
float_height = 10;
hp = 7;

//Sounds

sound_hit = snd_ghost_hit;
sound_die = snd_ghost_die;

//IDLE
anis[0, 0] = create_ani(spr_ghost_idle, 10, true, false);
//WALK
anis[1, 0] = create_ani(spr_ghost_idle, 10, true, false);
//JUMP
anis[2, 0] = create_ani(spr_ghost_idle, 2, false, false);
//FALL
anis[3, 0] = create_ani(spr_ghost_idle, 10, true, false);
//LAND
anis[4, 0] = create_ani(spr_ghost_idle, 4, false, false);
//HIT
anis[5, 0] = create_ani(spr_ghost_hit, 5, false, false);
//ATTACK0
anis[6, 0] = create_ani_atk(spr_ghost_attack0, 24, false, 1, 1, false);
//ATTACK1
anis[7, 0] = create_ani_atk(spr_ghost_attack1, 12, false, 2, 2, false);

//ATTACK0
atks[6, 0] = create_atk_proj(spr_ghost_breath, 19, -27, 5, 0, 1, 5, -3, 60, team, snd_ghost_attack0);
//ATTACK1
atks[7, 0] = create_atk_hbox(spr_ghost_attack1_hbox, 1, 10, -5, 60, team, snd_ghost_attack1);

//Physics

x_ground_fric = 0.1;
x_air_fric = 0.05;

x_ground_slide = 0.1;

x_ground_accel = 0.1;
x_air_accel = 0.25;

x_speed_max = 2;

y_accel = 0.5;

jump_vel = 10;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Input

//Reset Input

x_input_dir = 0;
input_attack0 = false;
input_attack1 = false;
input_jump = false;

//Manage chasing

var player = instance_nearest(x, y, obj_player);

if player != noone
{
    if abs(x - player.x) &lt;= chase_dist
    {
        chasing = true;
        chase_obj = player;
    }
}
else
{
    chasing = false;
    chase_obj = noone;
}


//Make the AI move towards their target

if chasing
{
    x_input_dir = -sign(x - chase_obj.x);
}

//Make the AI attack

action_timer++;

if action_timer % action_speed == 0
{
    if chasing
    {
        die = irandom(2);
        facing_target = -sign(x - chase_obj.x) == facing;
        
        if die == 0
        {
            if abs(x - chase_obj.x) &lt;= 100
            {
                if facing_target
                {
                    input_attack1 = true;
                }
            }
        }
        if die == 1
        {
            if facing_target
            {
                input_attack0 = true;
            }
        }
    }
}

input_jump = place_meeting(x + x_input_dir, y, obj_floor);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Parent Event

event_inherited();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/*

draw_set_color(c_black);

draw_text(0, 0, global.counter);
draw_text(0, 20, string(image_index));
draw_text(0, 40, "immune: " + string(immune));
draw_text(0, 60, "immune_time: " + string(immune_time));
draw_text(0, 80, "hp: " + string(hp));

draw_text(x - 100, y - 320, "sprite_index: " + string(sprite_index));
draw_text(x - 100, y - 300, "hit: " + string(hit));
draw_text(x - 100, y - 280, "attacking: " + string(attacking));
draw_text(x - 100, y - 260, "bbox right: " + string(bbox_right));
draw_text(x - 100, y - 240, "x: " + string(x));
draw_text(x - 100, y - 220, "y : " + string(y));
draw_text(x - 100, y - 200, "x speed: " + string(x_speed));
draw_text(x - 100, y - 180, "y speed: " + string(y_speed));
draw_text(x - 100, y - 140, "state: " + string(state));
draw_text(x - 100, y - 120, "on floor: " + string(on_ground));

*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
